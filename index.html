<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸª‘ ìš°ë¦¬ë°˜ ìë¦¬ë°°ì¹˜(0.1)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Toto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        input, button {
            padding: 12px 20px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-size: 16px;
        }
        
        input {
            flex: 1;
            min-width: 200px;
        }
        
        button {
            background: #667eea;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .classroom {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .seat {
            aspect-ratio: 1;
            background: white;
            border: 3px dashed #ddd;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #999;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .seat:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }
        
        .seat.filled {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-style: solid;
            border-color: #667eea;
        }
        
        .student-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .student-item {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background: #667eea;
            color: white;
            border-radius: 25px;
            cursor: move;
            transition: all 0.3s;
        }
        
        .student-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .info {
            text-align: center;
            color: #666;
            margin-top: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸª‘ ìš°ë¦¬ë°˜ ìë¦¬ë°°ì¹˜ ì‹œìŠ¤í…œ</h1>
        
        <div class="controls">
            <input type="text" id="studentName" placeholder="í•™ìƒ ì´ë¦„ ì…ë ¥">
            <button onclick="addStudent()">â• í•™ìƒ ì¶”ê°€</button>
            <button onclick="randomSeating()">ğŸ² ëœë¤ ë°°ì¹˜</button>
            <button onclick="clearAll()">ğŸ—‘ï¸ ì „ì²´ ì´ˆê¸°í™”</button>
        </div>
        
        <div class="student-list" id="studentList">
            <strong>ğŸ“ í•™ìƒ ëª©ë¡:</strong>
            <div id="students"></div>
        </div>
        
        <div class="classroom" id="classroom">
            <!-- 6x5 = 30ê°œ ìë¦¬ -->
        </div>
        
        <div class="info">
            ğŸ’¡ í•™ìƒì„ ë“œë˜ê·¸í•´ì„œ ìë¦¬ì— ë°°ì¹˜í•˜ì„¸ìš”! ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤.
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // ğŸ”¥ ì—¬ê¸°ì— Firebase ì„¤ì •ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
        const firebaseConfig = {
          apiKey: "AIzaSyD4Z3spQyBYZWRj6pfs3YkUGPB5xmt4bDo",
          authDomain: "toyproject-6217a.firebaseapp.com",
          databaseURL: "https://toyproject-6217a-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "toyproject-6217a",
          storageBucket: "toyproject-6217a.firebasestorage.app",
          messagingSenderId: "827049564372",
          appId: "1:827049564372:web:0ac278cd512bbd37a68341"
        };
        
        // Firebase ì´ˆê¸°í™”
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // ë‚˜ë¨¸ì§€ JavaScript ì½”ë“œëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ!
        console.log('Firebase ì—°ê²° ì„±ê³µ!');


                // Firebase ì´ˆê¸°í™” (ì´ë¯¸ ìˆìŒ)
        // ...
        
        // ì „ì—­ ë³€ìˆ˜
        let students = [];
        let seats = {};
        let draggedStudent = null;
        
        // ì´ˆê¸° ìë¦¬ ìƒì„± (6x5 = 30ìë¦¬)
        function initSeats() {
            const classroom = document.getElementById('classroom');
            classroom.innerHTML = '';
            
            for (let i = 0; i < 30; i++) {
                const seat = document.createElement('div');
                seat.className = 'seat';
                seat.dataset.seatId = i;
                seat.textContent = i + 1;
                
                // ë“œë¡­ ì´ë²¤íŠ¸
                seat.addEventListener('dragover', (e) => e.preventDefault());
                seat.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropStudent(i);
                });
                
                // í´ë¦­ìœ¼ë¡œ ì œê±°
                seat.addEventListener('click', () => {
                    if (seats[i]) {
                        removeSeatStudent(i);
                    }
                });
                
                classroom.appendChild(seat);
            }
        }
        
        // í•™ìƒ ì¶”ê°€
        function addStudent() {
            const input = document.getElementById('studentName');
            const name = input.value.trim();
            
            if (!name) {
                alert('í•™ìƒ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            if (students.includes(name)) {
                alert('ì´ë¯¸ ìˆëŠ” í•™ìƒì…ë‹ˆë‹¤!');
                return;
            }
            
            students.push(name);
            database.ref('students').set(students);
            input.value = '';
        }
        
        // í•™ìƒ ëª©ë¡ ë Œë”ë§
        function renderStudents() {
            const container = document.getElementById('students');
            container.innerHTML = '';
            
            students.forEach((name, index) => {
                // ì´ë¯¸ ë°°ì¹˜ëœ í•™ìƒì€ ì œì™¸
                if (Object.values(seats).includes(name)) return;
                
                const item = document.createElement('div');
                item.className = 'student-item';
                item.textContent = name;
                item.draggable = true;
                
                item.addEventListener('dragstart', () => {
                    draggedStudent = name;
                });
                
                // ë”ë¸”í´ë¦­ìœ¼ë¡œ ì‚­ì œ
                item.addEventListener('dblclick', () => {
                    if (confirm(`${name} í•™ìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                        students = students.filter(s => s !== name);
                        database.ref('students').set(students);
                    }
                });
                
                container.appendChild(item);
            });
        }
        
        // ìë¦¬ì— í•™ìƒ ë°°ì¹˜
        function dropStudent(seatId) {
            if (!draggedStudent) return;
            
            seats[seatId] = draggedStudent;
            database.ref('seats').set(seats);
            draggedStudent = null;
        }
        
        // ìë¦¬ì—ì„œ í•™ìƒ ì œê±°
        function removeSeatStudent(seatId) {
            if (!seats[seatId]) return;
            
            if (confirm(`${seats[seatId]} í•™ìƒì„ ìë¦¬ì—ì„œ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                delete seats[seatId];
                database.ref('seats').set(seats);
            }
        }
        
        // ìë¦¬ ë Œë”ë§
        function renderSeats() {
            const classroom = document.getElementById('classroom');
            const seatDivs = classroom.querySelectorAll('.seat');
            
            seatDivs.forEach((seat, index) => {
                if (seats[index]) {
                    seat.classList.add('filled');
                    seat.textContent = seats[index];
                } else {
                    seat.classList.remove('filled');
                    seat.textContent = index + 1;
                }
            });
        }
        
        // ëœë¤ ë°°ì¹˜
        function randomSeating() {
            if (students.length === 0) {
                alert('í•™ìƒì„ ë¨¼ì € ì¶”ê°€í•˜ì„¸ìš”!');
                return;
            }
            
            if (!confirm('ëœë¤ìœ¼ë¡œ ìë¦¬ë¥¼ ë°°ì¹˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            seats = {};
            const shuffled = [...students].sort(() => Math.random() - 0.5);
            
            shuffled.forEach((student, index) => {
                if (index < 30) {  // ìµœëŒ€ 30ìë¦¬
                    seats[index] = student;
                }
            });
            
            database.ref('seats').set(seats);
        }
        
        // ì „ì²´ ì´ˆê¸°í™”
        function clearAll() {
            if (!confirm('ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            students = [];
            seats = {};
            database.ref('students').set([]);
            database.ref('seats').set({});
        }
        
        // ğŸ”¥ ì‹¤ì‹œê°„ ë™ê¸°í™”!
        database.ref('students').on('value', (snapshot) => {
            students = snapshot.val() || [];
            renderStudents();
        });
        
        database.ref('seats').on('value', (snapshot) => {
            seats = snapshot.val() || {};
            renderSeats();
        });
        
        // ì´ˆê¸°í™”
        initSeats();
        renderStudents();
        renderSeats();
    </script>
</body>
</html>
